!function(){"use strict";function e(e,t,i){"addEventListener"in window?e.addEventListener(t,i,!1):"attachEvent"in window&&e.attachEvent("on"+t,i)}function t(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!P;e+=1)P=window[t[e]+"RequestAnimationFrame"];P||o(" RequestAnimationFrame not supported")}function i(){var e="Host page";return window.top!==window.self&&(e=window.parentIFrame?window.parentIFrame.getId():"Nested host page"),e}function a(e){return b+"["+i()+"]"+e}function o(e){w&&"object"==typeof window.console&&console.log(a(e))}function n(e){"object"==typeof window.console&&console.warn(a(e))}function r(e){function t(){function e(e,t,i){var a,o,n,r=null,d=0;i||(i={});var l=function(){d=!1===i.leading?0:Date.now(),r=null,n=e.apply(a,o),a=o=null};return function(){var s=Date.now();d||!1!==i.leading||(d=s);var c=t-(s-d);return a=this,o=arguments,c<=0?(clearTimeout(r),r=null,d=s,n=e.apply(a,o),a=o=null):r||!1===i.trailing||(r=setTimeout(l,c)),n}}function t(){var e={name:"pixlee:infinite:load:more",type:"relay",source:"parent",destination:"widget",data:{}};window.top.postMessage(JSON.stringify(e),"*")}function i(){var e=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight,i=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),a=S.iframe.offsetTop,o=S.iframe.offsetHeight;i+e>=a+o-.25*(a+o)&&t()}function a(){function e(e,t,i){var a,o,n,r,d,l=function(){var s=Date.now()-r;s<t?a=setTimeout(l,t-s):(a=null,i||(d=e.apply(n,o),n=o=null))};return function(){n=this,o=arguments,r=Date.now();var s=i&&!a;return a||(a=setTimeout(l,t)),s&&(d=e.apply(n,o),n=o=null),d}}function t(e){return""===e?0:parseFloat(e.replace("px",""))}function i(e){return window.getComputedStyle(S.iframe.parentElement.parentElement).getPropertyValue(e)}function a(){var e=t(i("padding-left")),a=t(i("padding-right")),o=t(i("padding-top")),n=t(i("padding-bottom")),r=t(i("width"))-e-a;return{height:t(i("height"))-o-n,width:r}}function n(){if(S.iframe&&S.iframe.parentElement){var e=a(),t={name:"pixlee:resize:widget",type:"relay",source:"parent",destination:"widget",data:{height:e.height,width:e.width}};window.top.postMessage(JSON.stringify(t),"*")}}function r(){if(!document.getElementById(S.iframe.id))return!1;var e=a(),t=e.height,i=e.width,o={id:S.id,iframe:S.iframe,type:S.type};"square"===d?i>t?(o.height=Math.floor(t),o.width=Math.floor(t)):(o.height=Math.floor(i),o.width=Math.floor(i)):"vertical"===d?(o.height=t,n()):o.width=i,c(o)}var d;c(S),l();var s=function(e){try{var t=JSON.parse(e.data);if("pixlee:widget:shape"===t.name)if("square"===t.data.type)d="square";else if("vertical"===t.data.type){d="vertical";var i=S.iframe.parentElement,a=i.style.height,o=i.parentElement.style.height,n="1000px";o&&"100%"!==o||a&&"100%"!==a||$(i).css("height",n)}"pixlee:scroll:mosaic:mobile"===t.name&&setTimeout((function(){var e=window.pageXOffset,t=window.pageYOffset+1;window.scrollTo(e,t)}),1e3)}catch(e){return}};n();var p=e((function(){"vertical"===d&&o.height!==window.innerHeight&&(r(),o.height=window.innerHeight),"vertical"!==d&&"undefined"!==d&&o.width!==window.innerWidth&&(r(),o.width=window.innerWidth)}),250);window.addEventListener("resize",p,!1),window.addEventListener("message",s,!1),C[M].resizedCallback(S)}window.onscroll=e((function(){i()}),500);var o={width:window.innerWidth,height:window.innerHeight};r("Height"),r("Width"),p(a,S,"resetPage")}function i(e){var t=e.id;o(" Removing iFrame: "+t),e.parentNode.removeChild(e),C[t].closedCallback(t),o(" --")}function a(){var e=A.substr(x).split(":");return{iframe:document.getElementById(e[0]),id:e[0],height:e[1],width:e[2],type:e[3]}}function r(e){var t=Number(C[M]["max"+e]),i=Number(C[M]["min"+e]),a=e.toLowerCase(),n=Number(S[a]);if(i>t)throw new Error("Value for min"+e+" can not be greater than max"+e);o(" Checking "+a+" is in range "+i+"-"+t),n<i&&(n=i,o(" Set "+a+" to min value")),n>t&&(n=t,o(" Set "+a+" to max value")),S[a]=""+n}function m(){var t=e.origin,i=S.iframe.src.split("/").slice(0,3).join("/");if(C[M].checkOrigin&&(o(" Checking connection is from: "+i),""+t!="null"&&t!==i))throw new Error("Unexpected message received from: "+t+" for "+S.iframe.id+". Message was: "+e.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}function u(){return b===(""+A).substr(0,x)}function g(){var e=S.type in{true:1,false:1};return e&&o(" Ignoring init message from meta parent page"),e}function f(e){return A.substr(A.indexOf(":")+v+e)}function h(e){o(" MessageCallback passed: {iframe: "+S.iframe.id+", message: "+e+"}"),C[M].messageCallback({iframe:S.iframe,message:JSON.parse(e)}),o(" --")}function P(){return null!==S.iframe||(console.warn("iFrame ("+S.id+") does not exist on "+_),!1)}function I(e){var t=e.getBoundingClientRect();return d(),{x:parseInt(t.left,10)+parseInt(k.x,10),y:parseInt(t.top,10)+parseInt(k.y,10)}}function E(e){function t(){k=r,N(),o(" --")}function i(){return{x:Number(S.width)+a.x,y:Number(S.height)+a.y}}var a=e?I(S.iframe):{x:0,y:0},r=i();o(" Reposition requested from iFrame (offset x:"+a.x+" y:"+a.y+")"),window.top!==window.self?window.parentIFrame?e?parentIFrame.scrollToOffset(r.x,r.y):parentIFrame.scrollTo(S.width,S.height):n(" Unable to scroll to requested position, window.parentIFrame not found"):t()}function N(){!1!==C[M].scrollCallback(k)&&l()}function O(e){function t(e){var t=I(e);o(" Moving to in page link (#"+i+") at x: "+t.x+" y: "+t.y),k={x:t.x,y:t.y},N(),o(" --")}var i=e.split("#")[1]||"",a=decodeURIComponent(i),n=document.getElementById(a)||document.getElementsByName(a)[0];window.top!==window.self?window.parentIFrame?parentIFrame.moveToAnchor(i):o(" In page link #"+i+" not found and window.parentIFrame not found"):n?t(n):o(" In page link #"+i+" not found")}function U(){switch(S.type){case"close":i(S.iframe),C[M].resizedCallback(S);break;case"message":h(f(6));break;case"scrollTo":E(!1);break;case"scrollToOffset":E(!0);break;case"inPageLink":O(f(9));break;case"reset":s(S);break;case"init":t(),C[M].initCallback(S.iframe);break;default:t()}}var A=e.data,S={},M=null;u()&&(S=a(),M=S.id,w=C[M].log,o(" Received: "+A),!g()&&P()&&m()&&(U(),y=!1))}function d(){null===k&&o(" Get page position: "+(k={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}).x+","+k.y)}function l(){null!==k&&(window.scrollTo(k.x,k.y),o(" Set page position: "+k.x+","+k.y),k=null)}function s(e){function t(){c(e),m("reset","reset",e.iframe)}o(" Size reset requested by "+("init"===e.type?"host page":"iFrame")),d(),p(t,e,"init")}function c(e){function t(t){e.iframe.style[t]=e[t]+"px",o(" IFrame ("+i+") "+t+" set to "+e[t]+"px")}var i=e.iframe.id;C[i].sizeHeight&&t("height"),C[i].sizeWidth&&t("width")}function p(e,t,i){i!==t.type&&P?(o(" Requesting animation frame"),P(e)):e()}function m(e,t,i){o("["+e+"] Sending msg to iframe ("+t+")"),i.contentWindow.postMessage(b+t,"*")}function u(t){function i(){function e(e){1/0!==C[g][e]&&0!==C[g][e]&&(u.style[e]=C[g][e]+"px",o(" Set "+e+" = "+C[g][e]+"px"))}e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}function a(e){return""===e&&(u.id=e="iFrameResizer"+h++,w=(t||{}).log,o(" Added missing iframe ID: "+e+" ("+u.src+")")),e}function n(){o(" IFrame scrolling "+(C[g].scrolling?"enabled":"disabled")+" for "+g),u.style.overflow=!1===C[g].scrolling?"hidden":"auto",u.scrolling=!1===C[g].scrolling?"no":"yes"}function r(){"number"!=typeof C[g].bodyMargin&&"0"!==C[g].bodyMargin||(C[g].bodyMarginV1=C[g].bodyMargin,C[g].bodyMargin=C[g].bodyMargin+"px")}function d(){return g+":"+C[g].bodyMarginV1+":"+C[g].sizeWidth+":"+C[g].log+":"+C[g].interval+":"+C[g].enablePublicMethods+":"+C[g].autoResize+":"+C[g].bodyMargin+":"+C[g].heightCalculationMethod+":"+C[g].bodyBackground+":"+C[g].bodyPadding+":"+C[g].tolerance+":"+C[g].enableInPageLinks}function l(t){e(u,"load",(function(){var e=y;m("iFrame.onload",t,u),!e&&C[g].heightCalculationMethod in I&&s({iframe:u,height:0,width:0,type:"init"})})),m("init",t,u)}function c(e){if("object"!=typeof e)throw new TypeError("Options is not an object.")}function p(e){for(var t in e=e||{},C[g]={},c(e),E)E.hasOwnProperty(t)&&(C[g][t]=e.hasOwnProperty(t)?e[t]:E[t]);w=C[g].log}var u=this,g=a(u.id);p(t),n(),i(),r(),l(d())}function g(){function i(e,t){if(!e.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==e.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">.");u.call(e,t)}return t(),e(window,"message",r),function(e,t){switch(typeof t){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(t||"iframe"),(function(t){i(t,e)}));break;case"object":i(t,e);break;default:throw new TypeError("Unexpected data type ("+typeof t+").")}}}function f(e){e.fn.iFrameResize=function(e){return this.filter("iframe").each((function(t,i){u.call(i,e)})).end()}}var h=0,y=!0,w=!1,v="message".length,b="[iFrameSizer]",x=b.length,_="",k=null,P=window.requestAnimationFrame,I={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},C={},E={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enableInPageLinks:!1,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){},scrollCallback:function(){return!0}};window.jQuery&&f(jQuery),window.PixleeiFrameResize=window.PixleeiFrameResize||g()}(),function(){var e=(document.currentScript&&document.currentScript.src?document.currentScript.src:"").match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i),t=e&&e[1]?e[1]:"assets.pixlee.com";-1!==t.indexOf(".pxlecdn.com")&&(t="assets.pixlee.com");var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://"+t+"/assets/fp.js",document.currentScript?document.currentScript.parentNode.insertBefore(i,document.currentScript):document.head&&document.head.appendChild(i)}(),function(){function e(e){return function(){try{return e.apply(this,arguments)}catch(e){setTimeout((function(){throw e}),0)}}}function t(e,i){if("function"==typeof i&&/^function/.test(i.toString()))return e(i);if("object"==typeof i&&null!==i)for(var a in i)i.hasOwnProperty(a)&&(i[a]=t(e,i[a]));return i}function i(a){return function(){var o=Array.prototype.slice.call(arguments).map(t.bind(null,e));try{return t(i,a.apply(this,o))}catch(e){if(e instanceof P)throw e;throw e}}}function a(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function o(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,/(tablet|ipad|playbook|silk)|(android(?!.*mobile))/i.test(e)&&(t=!0),t}function n(){var e,t,i,a=!1;return e=navigator.userAgent||navigator.vendor||window.opera,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),i=!!e.match(/WebKit/i),t&&i&&!e.match(/CriOS/i)&&(a=!0),a}function r(){var e;return e=navigator.userAgent||navigator.vendor||window.opera,e.match("CriOS")}function d(){var e=document.getElementById("flickerBackground");e&&document.body.removeChild(e)}function l(){var e=document.getElementById("flickerBackground");e||((e=document.createElement("div")).setAttribute("id","flickerBackground"),e.setAttribute("style","height:100%; width:100%; position:sticky; top:0; left:0; opacity:1; z-index:9999; background-color:white;"),document.body.appendChild(e))}function s(e){var t=-1!==navigator.userAgent.indexOf("MSIE"),i=!!window.MSInputMethodContext&&!!document.documentMode;t||i?PixleeiFrameResize({log:!1,enablePublicMethods:!0,resizedCallback:E.onResize,checkOrigin:!1},"iframe[id*=pixlee]"):PixleeiFrameResize({log:!1,enablePublicMethods:!0,resizedCallback:E.onResize,heightCalculationMethod:"min",checkOrigin:!1,sizeWidth:!e},"iframe[id*=pixlee]")}function c(){var e=E.getParameterByName("pixlee_widget_id",document.location.href),t=document.querySelector('[data-widget-id="'+e+'"]')||document.querySelector("[id*=pixlee_widget]");if(e&&t){var i="function"==typeof t.getBoundingClientRect?t.getBoundingClientRect().top:t.offsetTop;O.scrollToWidget(document.documentElement,i,300),E.changeUrl(E.removeParam("pixlee_widget_id",document.location.href))}}function p(e,t){if(t)return E.addParam(e,"experiment_group",t);if("group_known"===E.experimentState){const t=E.getCookie("experiment_"+E.ApiKey);return t?E.addParam(e,"experiment_group",t.group):(console.warn("Experiment cookie not found even though experimentState is set. This could be a development error and should be reported to the Emplifi team."),e)}return E.addParam(e,"random_number",k)}function m(){var e={name:"pixlee:fingerprint",data:"none",destination:"all",source:"parent",type:"relay"};if("undefined"!=typeof Fingerprint2){var t={excludes:{fonts:!0,fontsFlash:!0,webgl:!0,webglVendorAndRenderer:!0,plugins:!0,audio:!0}};setTimeout((function(){try{Fingerprint2.get(t,(function(t){var i=t.map((function(e){return e.value})),a=Fingerprint2.x64hash128(i.join(""),31);window[_].fingerprint=a,e.data=a,h(e)}))}catch(t){h(e)}}),0)}else h(e)}function u(){h({name:"pixlee:cookie",destination:"all",source:"parent",type:"relay",data:E.doesUserAcceptCookies()})}function g(){E.setCookieWithoutPrivacyCheck("EU_COOKIE_LAW_CONSENT",!0,30),u()}function f(){E.setCookieWithoutPrivacyCheck("EU_COOKIE_LAW_CONSENT",!1,30),E.setCookieWithoutPrivacyCheck("pixlee_analytics_cookie",{},0),u()}function h(e){var t,i=e.destination;"widget"===i?t=document.querySelectorAll("iframe[id*=pixlee_widget_iframe]"):"lightbox"===i?"undefined"!==w&&(t=[w]):"all"===i?t=document.querySelectorAll("iframe[id*=pixlee]"):console.log("unknown target frame");try{for(var a=0;a<t.length;a++)t[a].contentWindow.postMessage(JSON.stringify(e),"*")}catch(t){"PixleeAsyncInit"in window&&"function"==typeof window.PixleeAsyncInit?"widget"===i?window.PixleeAsyncInit():"lightbox"===i&&"widget"===e.source&&E.createLightboxContainer(v,null):console.warn("Pixlee: widget iframe is not initialized, please check your embed code")}}function y(e){var t,i,o=0;if(e.data){try{t=JSON.parse(e.data)}catch(e){return}if(-1!==e.origin.indexOf("//photos.pixlee.co")||-1!==e.origin.indexOf("pxlecdn.com")||-1!==e.origin.indexOf("pixlee.co")||!t.name||0===t.name.indexOf("pixlee:")){if(t.name&&E.subscribedEvents&&-1!==E.subscribedEvents.indexOf(t.name)){var s=!0;for(var c in i={},E.eventMappings)if(E.eventMappings[c]===t.name){i.eventName=c;break}t.data&&("photoOpened"===i.eventName?(i.data=JSON.parse(t.data.modelData)[t.data.indexToOpen],i.data.photoIndex=t.data.indexToOpen):"photoChanged"===i.eventName&&t.data.initialOpen?s=!1:i.data=t.data),s&&window.parent.postMessage(JSON.stringify(i),"*")}if(t.type&&"action"===t.type){var p,g,f;if("pixlee:close:widget"===t.name){var y=document.getElementsByTagName("iframe");for(o=0;o<y.length;o++)if(y[o].id!==E.defaults.lightboxId&&y[o].contentWindow===e.source){y[o].parentNode.removeChild(y[o]);break}}else if(t.name&&"pixlee:show:lightbox"===t.name){for(p in x)(f=document.getElementById(p))&&(f.setAttribute("aria-hidden",!0),f.blur());var v=r()?10:0;setTimeout((function(){w.style.display="block",w.style.webkitTransform="translatez(0)",w.style.position="fixed",w.style.zIndex="2147483647",w.removeAttribute("aria-hidden"),d()}),v)}else if(t.name&&"pixlee:hide:lightbox"===t.name){for(p in x)(f=document.getElementById(p))&&(f.removeAttribute("aria-hidden"),f.focus());setTimeout((function(){w.style.display="none",w.setAttribute("aria-hidden",!0),w.blur()}),0),n()&&d(),E.changeUrl(E.removeParam("pixlee_album_photo_id",window.location.href))}else if(t.name&&"pixlee:show:uploader"===t.name){for(p in x)(f=document.getElementById(p))&&f.setAttribute("aria-hidden",!0);w.setAttribute("aria-hidden",!0),t.data&&t.data.designEditorDevice&&(E.changeUserAgent(t.data.designEditorDevice),b&&(b.className=t.data.designEditorDevice)),E.createLightboxUploader(t.data)}else if(t.name&&"pixlee:show:social:connect"===t.name)E.createSocialAuth(x[t.data.widgetId].options);else if(t.name&&"pixlee:change:lightbox:image"===t.name)E.changeUrl(E.updateURLParameter(window.location.href,"pixlee_album_photo_id",t.data.id));else if(t.name&&"pixlee:remove:url:param"===t.name)E.changeUrl(E.removeParam("pixlee_album_photo_id",window.location.href));else if(t.name&&"pixlee:create:cookie"===t.name)t.data&&(E.createCookie(t.data),E.tagByEmail());else if(t.name&&"pixlee:opened:photo"===t.name)t.data&&E.openedPhoto(t.data);else if(t.name&&"pixlee:interacted"===t.name)t.data&&E.interacted(t.data);else if(t.name&&"pixlee:close:uploader"===t.name){for(p in x)(f=document.getElementById(p))&&f.removeAttribute("aria-hidden");w&&w.setAttribute("aria-hidden",!0),b&&b.parentNode&&(a()&&window.removeEventListener("resize",E.mobileUploaderResize),setTimeout((function(){b.parentNode.removeChild(b)}),0))}else if(t.name&&"pixlee:interactive:widget:resize"===t.name){var k,P;for(p in x)(g=x[p].iframe).contentWindow===e.source&&(t.data.active?(k=g.getAttribute("style"),P=window.scrollY||0,t.data.isPreview||g.setAttribute("style","top: 0px; left: 0px; width: 100%; height: 100%; padding: 0px; margin: 0px; position: fixed; z-index:2147483647; border: none; overflow: hidden;"),E.setCookie("pixlee_widget_style",k,30),E.setCookie("pixlee_widget_scroll_pos",P,30)):(k=E.getCookie("pixlee_widget_style"),P=E.getCookie("pixlee_widget_scroll_pos"),k?g.setAttribute("style",k):g.setAttribute("style","border: none; overflow: hidden;"),P&&window.scrollTo(window.scrollX,P)))}else if(t.name&&"pixlee:interactive:widget:mobile:scroll:top:fix"===t.name)n()&&l();else if(t.name&&"pixlee:interactive:widget:mobile:horizontal"===t.name)for(p in x)(g=x[p].iframe).contentWindow===e.source&&(g.style.width=screen.width+"px",g.style.maxWidth=screen.width+"px");else if(t.name&&"pixlee:widget:size:fix"===t.name){var I=/iPad|iPhone|iPod/.test(navigator.platform),C=-1!==document.location.href.indexOf("standalone"),N=t.data;for(p in x){var O=x[p].options,U=x[p].iframe;O.widgetId&&+O.widgetId===N.widgetId&&(I&&!C&&"tap2shop"!==N.widgetType&&"photowall"!==N.widgetType&&"mosaic"!==N.widgetType&&"mosaic_v2"!==N.widgetType&&"single"!==N.widgetType?U.width="1px":U.width="100%")}}else if(t.name&&"pixlee:open:lightbox"===t.name)n()&&l();else if(t.name&&"pixlee:hide:flicker:screen"===t.name)d();else if(t.name&&"pixlee:generate:attribution:link"===t.name)E.forceAttribution(t.data);else if(t.name&&"pixlee:get:parent:protocol"===t.name)t.data.protocol=window.location.protocol;else if(t.name&&"pixlee:get:fingerprint:from:parent"===t.name){if(window[_].fingerprint)h({name:"pixlee:fingerprint",data:window[_].fingerprint,destination:"all",source:"parent",type:"relay"});else"complete"===document.readyState?m():window.addEventListener("load",m)}else if(t.name&&"pixlee:log:to:sentry"===t.name)window.pixSentry.captureMessage(t.data.messageText,t.data.messageExtraFields);else if(t.name&&"pixlee:experiment:info"===t.name){if(t.data.experimenting){var A={};A.id=t.data.experiment_id,A.group=t.data.experiment_group,E.setCookie("experiment_"+E.ApiKey,A,30)}}else if(t.name&&"pixlee:hide:widget"===t.name){y=document.getElementsByTagName("iframe");for(o=0;o<y.length;o++)if(y[o].id!==E.defaults.lightboxId&&y[o].contentWindow===e.source){y[o].parentNode.style.display="none";break}}else if(t.name&&"pixlee:get:cookie:from:parent"===t.name)"complete"===document.readyState?u():window.addEventListener("load",u);else if(t.name&&"pixlee:save:votes"===t.name){var S=t.data.pixlee_likes;E.setCookie("pixlee_likes",S,30)}else if(t.name&&"pixlee:page:persisted"===t.name){var M=t.data.pixleeAlbumPhotoId;M&&E.setLightboxPhotoId(M)}else if(t.name&&"pixlee:share:to:social"===t.name){h({name:"pixlee:trigger:share:to:social",data:{photoJson:t.data.photoJson,source:t.data.source,url:window.location.href},destination:"widget",source:"parent",type:"action"})}"parent"!==t.destination&&(t.type="relay")}t.type&&"relay"===t.type&&h(t)}}}var w,v,b,x={},_="",k=parseInt(10*Math.random())+1;if("Pixlee"in window&&"dashboard"!==window.Pixlee.rootRoute)return!1;if("undefined"!=typeof Sentry&&Sentry.SDK_VERSION&&Sentry.SDK_VERSION.startsWith("6")&&void 0===window.pixSentry)try{window.pixSentry=new Sentry.BrowserClient({dsn:"https://f2c63857ff3d4d609f3011523e5933d5@sentry.io/12047",ignoreErrors:[/{\"name\":\"Error executing guarded function\",\"message\":\"Unable to get property \'origin\' of undefined or null reference\"}/,/{\"name\":\"Error executing guarded function\",\"message\":\"i is undefined\"}/,/widget url is undefined or empty/,/onMessage is not a function/,/The operation is insecure/,/is not a function \(evaluating/,/Unable to get property \'appendChild\' of undefined or null reference/,/currentAlbum is undefined/,/attempted to read protected variable/,/postMessage is not a function/,/Object doesn\'t support this property or method/,/FastClick is not defined/,/variable: FastClick/,/\$ is not defined/,/Cannot call method \"get\" of undefined/,/Cannot find function addEventListener in object/,/find variable: \$/,/but instead had type object/,/property or method \'postMessage\'/,/\'FastClick\' is undefined/,/NS_ERROR_FAILURE:/,/\'$\' is undefined/,/Access is denied/,/\'undefined\' is not a function/,/\'console\' is undefined/,/function miss failed/,/Invalid calling object/,/Out of memory/,/undefined is not an object/,/Error: Unspecified error/,/global jQuery object was not available/,/The operation was aborted/,/Illegal invocation/,/The play() request was interrupted by a call to pause()/,/The request is not allowed by the user agent or the platform in the current context/,/Non-Error promise rejection captured with/,/find variable: disableLegacyCookie/],denyUrls:[/pdp\.test/,/widget\.test/,/codepen/]})}catch(e){}var P=function(e){Error.prototype.constructor.apply(this,arguments),this.message=e};P.prototype=new Error;var I=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),C=function(e){if(e){var t=e,i=window.innerWidth,a=window.innerHeight;if("function"==typeof t.getBoundingClientRect){var o=t.getBoundingClientRect(),n=o.top+o.bottom+o.left+o.right,r=o.top>=0&&o.top<a,d=o.bottom>0&&o.bottom<=a,l=o.left>=0&&o.left<i,s=o.right>0&&o.right<=i;return n&&(r||d)&&(l||s)}var c=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,p=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,m=c+a,u=p+i,g=t.offsetTop,f=t.offsetLeft,h=g+t.clientHeight,y=f+t.clientWidth;return g<=m&&h>=c&&f<=u&&y>=p}},E={provide:function(e,t){this[e]=i(t)},onResize:function(e){e.iframe.style.visibility&&(e.iframe.style.visibility=""),"1px"===e.iframe.width&&(e.iframe.style.minWidth="100%");var t=E.getParameterByName("pixlee_uploader",document.location.href);t&&E.createLightboxUploader({widgetId:t}),c()},defaults:{containerId:"pixlee_container",setMetaTags:!1,rootUrl:"//photos.pixlee.co/widget",uploaderUrl:"//photos.pixlee.co/uploader",lightboxRootUrl:"//photos.pixlee.co/lightbox",socialAuthUrl:"//photos.pixlee.co/social_auth",distilleryUrl:"//distillery.pixlee.co",iframeId:"pixlee_widget_iframe",lightboxId:"pixlee_lightbox_iframe",uploaderId:"pixlee_uploader",socialAuthId:"pixlee_social_auth"},scrollLeftPosition:0,scrollTopPosition:0};E.provide("getCookieHelper",(function(e){var t,i,a,o=document.cookie.split(";");for(t=0;t<o.length;t++)if(i=o[t].substr(0,o[t].indexOf("=")),a=o[t].substr(o[t].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))==e)return JSON.parse(decodeURIComponent(a));return null})),E.provide("getCookie",(function(e){return E.getCookieHelper(e)||E.getCookieHelper(e+"_legacy")})),E.provide("addParam",(function(e,t,i){var a,o=document.createElement("a"),n=/[?&]([^=]+)=([^&]*)/g,r=[];for(o.href=e,i=i||"";a=n.exec(o.search);)t!=a[1]&&r.push(a[1]+"="+a[2]);return r.push(encodeURIComponent(t)+"="+encodeURIComponent(i)),o.search=("?"==o.search.substring(0,1)?"":"?")+r.join("&"),o.href})),E.provide("setCookieWithoutPrivacyCheck",(function(e,t,i){var a=new Date;a.setDate(a.getDate()+i);var o=encodeURIComponent(JSON.stringify(t))+(null==i?"":"; expires="+a.toUTCString())+"; path=/; domain="+window.location.host.replace("www","");document.cookie=e+"="+o+"; SameSite=None; Secure",E.disableLegacyCookie||(document.cookie=e+"_legacy="+o)})),E.provide("setCookie",(function(e,t,i){E.doesUserAcceptCookies()&&E.setCookieWithoutPrivacyCheck(e,t,i)})),E.provide("getParameterByName",(function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null==i?null:decodeURIComponent(i[1].replace(/\+/g," "))})),E.provide("removeParam",(function(e,t){var i=t.split("?")[0],a=[],o=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==o){for(var n=(a=o.split("&")).length-1;n>=0;n-=1)a[n].split("=")[0]===e&&a.splice(n,1);a.length>0&&(i=i+"?"+a.join("&"))}return i})),E.provide("changeUrl",(function(e){history.replaceState&&window.location.href!=e&&window.history.replaceState({path:e},"",e)})),E.provide("iframeErrorHandler",(function(e){return document.getElementById("myIFrame").style.display="none",console.error("Error loading iframe contents: "+e),!0})),E.provide("updateURLParameter",(function(e,t,i){var a,o,n=null,r="",d=e.split("?"),l=d[0],s=d[1],c="";if(s){o=(a=s.split("#"))[0],(n=a[1])&&(s=o),d=s.split("&");for(var p=0;p<d.length;p++)d[p].split("=")[0]!=t&&(r+=c+d[p],c="&")}else o=(a=l.split("#"))[0],n=a[1],o&&(l=o);return n&&(i+="#"+n),l+"?"+r+(c+""+t+"="+i)})),E.provide("refreshWidgets",(function(){for(var e=document.querySelectorAll("[id*="+E.defaults.iframeId+"]"),t=0;t<e.length;t++)e[t].src=e[t].src})),E.provide("setLightboxPhotoId",(function(e){var t=setInterval((function(){if("complete"===document.readyState){clearInterval(t);var i=document.getElementById(E.defaults.lightboxId),a=i.src,o=new URL(a).pathname.match(/\d+$/),n=o?o[0]:null;i.src=n?a.replace(n,e):a.replace("lightbox","lightbox/"+e),E.refreshWidgets()}}),100)})),E.provide("createLightboxContainer",(function(e,t){if((void 0===e.lightbox||e.lightbox)&&!document.querySelector("#"+E.defaults.lightboxId)){var i=document.createElement("iframe");i.id=E.defaults.lightboxId,i.width="100%",i.height="100%",i.style.top="0",i.style.left="0","undefined"!=typeof I18n&&void 0!==I18n.t?i.title=I18n.t("widget.titles.lightbox"):i.title="Shop customer photos with Pixlee",i.style.bottom="0",i.style.right="0",i.style.padding=0,i.style.margin=0,i.style.position="fixed",i.style.zIndex="2147483647",i.style.display="none",i.frameBorder="0",i.style.border="none",i.setAttribute("allowFullScreen","");var n=null!=t?E.defaults.lightboxRootUrl+"/"+t:E.defaults.lightboxRootUrl,r=E.getParameterByName("experiment_group",document.location.href);e.AB&&(n=p(n,r)),void 0===e.widgetId?(e.displayOptionsId&&(n=E.addParam(n,"display_options_id",e.displayOptionsId)),e.accountId&&(n=E.addParam(n,"account_id",e.accountId)),e.type&&(n=E.addParam(n,"type",e.type)),e.recipeId&&(n=E.addParam(n,"recipe_id",e.recipeId)),e.albumId?n=E.addParam(n,"album_id",e.albumId):e.albumPhotoId&&(n=E.addParam(n,"album_photo_id",e.albumPhotoId))):n=E.addParam(n,"widget_id",e.widgetId),e.skuId&&(n=e.parent_category?E.addParam(n,"p_t_c_id",e.skuId):E.addParam(n,"product_id",e.skuId)),e.skuOrCategories&&(n=E.addParam(n,"sku_or_categories",e.skuOrCategories)),e.productName&&(n=E.addParam(n,"product_name",e.productName)),e.categoryId&&(n=E.addParam(n,"category_id",e.categoryId)),e.previewMode&&(n=E.addParam(n,"previewMode",e.previewMode)),e.isFacebook&&(n=E.addParam(n,"is_facebook",e.isFacebook)),e.categoryUrl&&(n=E.addParam(n,"category_url",e.categoryUrl)),e.categoryName&&(n=E.addParam(n,"category_name",e.categoryName)),e.insensitiveCategoryName&&(n=E.addParam(n,"insensitive_category_name",e.insensitiveCategoryName)),e.nativeCategoryId&&(n=E.addParam(n,"native_category_id",e.nativeCategoryId)),e.fallbackAlbumId&&(n=E.addParam(n,"fallback_album_id",e.fallbackAlbumId)),e.fallbackThreshold&&(n=E.addParam(n,"fallback_threshold",e.fallbackThreshold)),e.designEditorDevice&&"desktop"!==e.designEditorDevice&&(n=E.addParam(n,"design_editor_device",e.designEditorDevice),i.className=e.designEditorDevice),a()&&!e.designEditorDevice?n=E.addParam(n,"mobile",!0):o()&&!e.designEditorDevice&&(n=E.addParam(n,"tablet",!0)),E.ApiKey&&(n=E.addParam(n,"api_key",E.ApiKey)),i.onerror=function(e){E.iframeErrorHandler(e,i.id)},i.onload=function(){e.onLightboxLoaded&&e.onLightboxLoaded()};var d=function(){i.src=n,E.priority||document.body.appendChild(i),w=i,v=e};if(n=E.addParam(n,"parent_url",document.location.href.split(/[?#]/)[0]),null!==t){var l=new XMLHttpRequest;l.onloadend=function(){l.readyState!==XMLHttpRequest.DONE&&4!==l.readyState||(l.status>=200&&l.status<400?d():E.createLightboxContainer(e,null))},w=i,v=e,l.open("GET",n,!0),l.send()}else d()}})),E.provide("changeUserAgent",(function(e){navigator.__defineGetter__("userAgent",(function(){return e}))})),E.provide("createLightboxUploader",(function(e){if("object"==typeof e&&void 0!==e.usingKeyboard){var t=document.querySelector('iframe[src="'+e.widgetId+'"]'),i=e.usingKeyboard;(e=x[t.id].options).usingKeyboard=i}if(!document.querySelector("#"+E.defaults.uploaderId)){var n=document.createElement("iframe");n.id=E.defaults.uploaderId,n.width="100%",n.height="100%","undefined"!=typeof I18n&&void 0!==I18n.t?n.title=I18n.t("widget.titles.uploader"):n.title="Upload customer photos with Pixlee",n.style.top="0",n.style.left="0",n.style.position="fixed",n.style.zIndex="2147483647",n.style.visibility="hidden",n.frameBorder="0",n.style.border="none";var r=E.defaults.uploaderUrl,d=E.getParameterByName("experiment_group",document.location.href);e.AB&&(r=p(r,d)),a()&&(E.pixleeMobileUploader=n,window.addEventListener("resize",E.mobileUploaderResize)),void 0===e.widgetId?(e.displayOptionsId&&(r=E.addParam(r,"display_options_id",e.displayOptionsId)),e.recipeId&&(r=E.addParam(r,"recipe_id",e.recipeId)),r=e.type?E.addParam(r,"type",e.type):E.addParam(r,"type","uploader"),e.accountId&&(r=E.addParam(r,"account_id",e.accountId)),e.albumId&&(r=E.addParam(r,"album_id",e.albumId)),e.albumPhotoId&&(r=E.addParam(r,"album_photo_id",e.albumPhotoId))):r=E.addParam(r,"widget_id",e.widgetId),E.ApiKey&&(r=E.addParam(r,"api_key",E.ApiKey)),e.previewMode&&(r=E.addParam(r,"previewMode",e.previewMode)),e.skuId&&(r=e.parent_category?E.addParam(r,"p_t_c_id",e.skuId):E.addParam(r,"product_id",e.skuId)),e.productName&&(r=E.addParam(r,"product_name",e.productName)),e.skuOrCategories&&(r=E.addParam(r,"sku_or_categories",e.skuOrCategories)),
e.nativeCategoryId&&(r=E.addParam(r,"native_category_id",e.nativeCategoryId)),e.categoryId&&(r=E.addParam(r,"category_id",e.categoryId)),e.categoryName&&(r=E.addParam(r,"category_name",e.categoryName)),e.insensitiveCategoryName&&(r=E.addParam(r,"insensitive_category_name",e.insensitiveCategoryName)),e.categoryUrl&&(r=E.addParam(r,"category_url",e.categoryUrl)),e.fallbackAlbumId&&(r=E.addParam(r,"fallback_album_id",e.fallbackAlbumId)),e.fallbackThreshold&&(r=E.addParam(r,"fallback_threshold",e.fallbackThreshold)),e.designEditorDevice&&"desktop"!==e.designEditorDevice&&(E.changeUserAgent(e.designEditorDevice),n.className=e.designEditorDevice,r=E.addParam(r,"design_editor_device",e.designEditorDevice)),a()&&!e.designEditorDevice?r=E.addParam(r,"mobile",!0):o()&&!e.designEditorDevice&&(r=E.addParam(r,"tablet",!0)),"boolean"==typeof e.usingKeyboard&&(r=E.addParam(r,"using_keyboard",e.usingKeyboard)),n.onerror=function(e){E.iframeErrorHandler(e,n.id)},n.onload=function(){n.style.visibility="",e.onUploaderLoaded&&e.onUploaderLoaded(),e.profile&&O.setUploaderProfile(e.profile)},n.src=r,document.body.appendChild(n),n.style.visibility="",n.focus(),setTimeout((function(){PixleeiFrameResize({log:!1,enablePublicMethods:!0,heightCalculationMethod:"grow",checkOrigin:!1,sizeWidth:!0},"#"+n.id)}),0),b=n}})),E.provide("createSocialAuth",(function(e){if(!document.querySelector("#"+E.defaults.socialAuthId)){var t=document.createElement("iframe");t.id=E.defaults.socialAuthId,t.width="100%",t.height="100%",t.style.top="0",t.style.left="0","undefined"!=typeof I18n&&void 0!==I18n.t?t.title=I18n.t("widget.titles.share"):t.title="Share customer photos with Pixlee",t.style.position="fixed",t.style.zIndex="2147483647",t.style.visibility="hidden",t.frameBorder="0",t.style.border="none";var i=E.defaults.socialAuthUrl,n=E.getParameterByName("experiment_group",document.location.href);e.AB&&(i=p(i,n)),void 0===e.widgetId?(e.displayOptionsId&&(i=E.addParam(i,"display_options_id",e.displayOptionsId)),e.recipeId&&(i=E.addParam(i,"recipe_id",e.recipeId)),e.albumId&&(i=E.addParam(i,"album_id",e.albumId)),e.accountId&&(i=E.addParam(i,"account_id",e.accountId)),e.albumPhotoId&&(i=E.addParam(i,"album_photo_id",e.albumPhotoId)),i=e.type?E.addParam(i,"type",e.type):E.addParam(i,"type","social_auth")):i=E.addParam(i,"widget_id",e.widgetId),E.ApiKey&&(i=E.addParam(i,"api_key",E.ApiKey)),e.previewMode&&(i=E.addParam(i,"previewMode",e.previewMode)),e.skuId&&(i=e.parent_category?E.addParam(i,"p_t_c_id",e.skuId):E.addParam(i,"product_id",e.skuId)),e.productName&&(i=E.addParam(i,"product_name",e.productName)),e.skuOrCategories&&(i=E.addParam(i,"sku_or_categories",e.skuOrCategories)),e.nativeCategoryId&&(i=E.addParam(i,"native_category_id",e.nativeCategoryId)),e.categoryId&&(i=E.addParam(i,"category_id",e.categoryId)),e.categoryName&&(i=E.addParam(i,"category_name",e.categoryName)),e.insensitiveCategoryName&&(i=E.addParam(i,"insensitive_category_name",e.insensitiveCategoryName)),e.categoryUrl&&(i=E.addParam(i,"category_url",e.categoryUrl)),e.fallbackAlbumId&&(i=E.addParam(i,"fallback_album_id",e.fallbackAlbumId)),e.fallbackThreshold&&(i=E.addParam(i,"fallback_threshold",e.fallbackThreshold)),e.designEditorDevice&&"desktop"!==e.designEditorDevice&&(E.changeUserAgent(e.designEditorDevice),t.className=e.designEditorDevice,i=E.addParam(i,"design_editor_device",e.designEditorDevice)),a()&&!e.designEditorDevice?i=E.addParam(i,"mobile",!0):o()&&!e.designEditorDevice&&(i=E.addParam(i,"tablet",!0)),t.onerror=function(e){E.iframeErrorHandler(e,t.id)},t.onload=function(){t.style.visibility="",PixleeiFrameResize({log:!0,enablePublicMethods:!0,heightCalculationMethod:"grow",checkOrigin:!1,sizeWidth:!0})},t.src=i,document.body.appendChild(t),t}})),E.provide("tagByEmail",(function(){if(-1!==window.location.href.indexOf("pixlee_source=email")){if(window[_]&&window[_].taggedByEmail||window.PixleeTrackingPixel&&window.PixleeTrackingPixel.taggedByEmail)return;h({name:"pixlee:tag:by:email",data:{windowLocationHref:window.location.href,currentPixleeUserId:E.getCookie("pixlee_analytics_cookie").CURRENT_PIXLEE_USER_ID,apiKey:E.ApiKey},destination:"all",source:"parent",type:"relay"}),O.taggedByEmail=!0}})),E.provide("createCookie",(function(e){if(!E.getCookie("pixlee_analytics_cookie")){var t={};t.CURRENT_PIXLEE_USER_ID=e.distinct_user_hash,E.setCookie("pixlee_analytics_cookie",t,e.attribution_window)}}));var N=!1;E.provide("openedPhoto",(function(e){var t=E.getCookie("pixlee_analytics_cookie");t?E.setCookie("pixlee_analytics_cookie",t,e.attribution_window):N||(N=!0,E.createCookie(e),E.openedPhoto(e))})),E.provide("interacted",(function(e){var t=E.getCookie("pixlee_analytics_cookie");t?E.setCookie("pixlee_analytics_cookie",t,e.attribution_window):N||(N=!0,E.createCookie(e),E.interacted(e))})),E.provide("doesUserAcceptCookies",(function(){var e=E.getCookie("EU_COOKIE_LAW_CONSENT");return null===e||e}));var O={provide:function(e,t){this[e]=i(t)}};O.provide("callCallback",(function(e){e()})),O.provide("throwManaged",(function(e){if("number"!=typeof e)throw new P("Invalid argument")})),O.provide("openUploader",(function(e){E.createLightboxUploader(e)})),O.provide("addSimpleWidget",(function(e){var t;e.albumId?t=E.addParam(E.defaults.rootUrl,"album_id",e.albumId):e.albumPhotoId?t=E.addParam(E.defaults.rootUrl,"album_photo_id",e.albumPhotoId):e.widgetId&&(t=E.addParam(E.defaults.rootUrl,"widget_id",e.widgetId)),e.iframe_src=t,E.addWidget(e)})),O.provide("addProductWidget",(function(e){var t;if(e.ecomm_platform&&"shopify"===e.ecomm_platform){var i={};i.api_key=E.ApiKey;var a=window.location.pathname.replace(/\/$/,"").split("/"),o=a[a.length-1];(r=new XMLHttpRequest).onreadystatechange=function(){r.readyState!==XMLHttpRequest.DONE&&4!==r.readyState||(r.status>=200&&r.status<400?(e.skuId=JSON.parse(r.responseText).sku,t=e.parent_category?E.addParam(E.defaults.rootUrl,"p_t_c_id",e.skuId):E.addParam(E.defaults.rootUrl,"product_id",e.skuId),e.widgetId&&(t=E.addParam(t,"widget_id",e.widgetId)),e.iframe_src=t,E.addWidget(e),s()):console.log("Call to Distillery failed. Status Code "+r.status))};var n=E.defaults.distilleryUrl+"/api/v1/accounts/"+e.accountId+"/get_shopify_sku?";n=(n=n+"api_key="+i.api_key)+"&handle="+o,r.open("GET",n,!0),r.setRequestHeader("X-Alt-Referer","photos.pixlee.com"),r.send(),E.ecomm_platform=e.ecomm_platform}else if(e.ecomm_platform&&"bigcommerce"===e.ecomm_platform){var r;t=(t=window.location.pathname).replace(/\/$/,""),(r=new XMLHttpRequest).onreadystatechange=function(){r.readyState!==XMLHttpRequest.DONE&&4!==r.readyState||(r.status>=200&&r.status<400?(e.skuId=JSON.parse(r.responseText).sku,t=E.addParam(E.defaults.rootUrl,"product_id",e.skuId),e.widgetId&&(t=E.addParam(t,"widget_id",e.widgetId)),e.iframe_src=t,E.addWidget(e),s()):console.log("Call to Distillery failed. Status Code "+r.status))};var d=E.defaults.distilleryUrl+"/api/v1/accounts/"+e.accountId+"/get_bigcommerce_sku";d=(d=d+"?product_url="+t)+"&api_key="+E.ApiKey,r.open("GET",d,!0),r.setRequestHeader("X-Alt-Referer","photos.pixlee.com"),r.send()}else e.widgetId?(t=E.addParam(E.defaults.rootUrl,"widget_id",e.widgetId),t=e.parent_category?E.addParam(t,"p_t_c_id",e.skuId):e.productName?E.addParam(t,"product_name",e.productName):E.addParam(t,"product_id",e.skuId)):e.skuId?t=E.addParam(E.defaults.rootUrl,"product_id",e.skuId):e.skuOrCategories?t=E.addParam(E.defaults.rootUrl,"sku_or_categories",e.skuOrCategories):e.productName&&(t=E.addParam(E.defaults.rootUrl,"product_name",e.productName)),e.iframe_src=t,E.addWidget(e)})),O.provide("addCategoryWidget",(function(e){var t=E.addParam(E.defaults.rootUrl,"widget_id",e.widgetId);if(e.ecomm_platform&&"bigcommerce"===e.ecomm_platform||e.categoryByUrl){var i=window.location.pathname;e.categoryUrl=i,t=E.addParam(t,"category_url",e.categoryUrl)}else t=e.nativeCategoryId?E.addParam(t,"native_category_id",e.nativeCategoryId):e.categoryName?E.addParam(t,"category_name",e.categoryName):e.insensitiveCategoryName?E.addParam(t,"insensitive_category_name",e.insensitiveCategoryName):E.addParam(t,"category_id",e.categoryId);e.iframe_src=t,E.addWidget(e)})),E.provide("initMeta",(function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("meta");t.name="viewport",t.content="width=device-width,initial-scale=1,user-scalable=no,maximum-scale=1",t.id="metatag",e.appendChild(t)})),O.provide("close",(function(e){for(var t in x){var i=x[t].iframe;i&&i.parentNode&&i.parentNode.removeChild(i)}x={},b&&b.parentNode&&b.parentNode.removeChild(b),w&&w.parentNode&&w.parentNode.removeChild(w),e||window.removeEventListener("message",y);var a=document.querySelector('[id*="powered_by_pixlee"]');a&&E.mutationObserverPoweredBy&&(a.removeEventListener("DOMNodeRemoved",E.mutationObserverPoweredBy),a.parentNode.removeChild(a)),E.changeUrl(E.removeParam("pixlee_album_photo_id",window.location.href))})),E.provide("addWidget",(function(t){var i=t.iframe_src;t.setMetaTags&&E.initMeta();var n=E.getParameterByName("pixlee_album_photo_id",document.location.href),r=E.getParameterByName("pixlee_filters",document.location.href),d=E.getParameterByName("experiment_group",document.location.href);E.getCookieConsent=t.getCookieConsent,E.disableLegacyCookie=t.disableLegacyCookie,t.AB&&(i=p(i,d)),t.lightboxOff||E.createLightboxContainer(t,n),r&&(i=E.addParam(i,"filters",r)),t.display_options&&(i=E.addParam(i,"display_options",t.display_options)),t.recipe&&(i=E.addParam(i,"recipe",t.recipe)),t.previewMode&&(i=E.addParam(i,"previewMode",t.previewMode)),t.isFacebook&&(i=E.addParam(i,"is_facebook",t.isFacebook)),void 0===t.lightbox||t.lightbox||(i=E.addParam(i,"show_lightbox","false")),t.categoryUrl&&(i=E.addParam(i,"category_url",t.categoryUrl)),t.categoryName&&(i=E.addParam(i,"category_name",t.categoryName)),t.insensitiveCategoryName&&(i=E.addParam(i,"insensitive_category_name",t.insensitiveCategoryName)),t.nativeCategoryId&&(i=E.addParam(i,"native_category_id",t.nativeCategoryId)),t.fallbackAlbumId&&(i=E.addParam(i,"fallback_album_id",t.fallbackAlbumId)),t.fallbackThreshold&&(i=E.addParam(i,"fallback_threshold",t.fallbackThreshold)),t.getCookieConsent&&(i=E.addParam(i,"require_cookie_consent",t.getCookieConsent)),!0===t.denyCookies?O.denyCookiePolicy():!1===t.denyCookies&&O.acceptCookiePolicy(),t.subscribedEvents&&(E.eventMappings={photoOpened:"pixlee:open:lightbox",photoClosed:"pixlee:hide:lightbox",photoChanged:"pixlee:change:lightbox:image",ctaClicked:"pixlee:cta:clicked",ctaChanged:"pixlee:cta:changed",widgetLoaded:"pixlee:widget:loaded",widgetNumPhotos:"pixlee:widget:num:photos",widgetNavigated:"pixlee:widget:navigated",widgetLoadMore:"pixlee:widget:load:more",uploadComplete:"pixlee:upload:complete",uploaderOpened:"pixlee:uploader:open",socialShare:"pixlee:social:share",widgetHidden:"pixlee:hide:widget"},E.subscribedEvents=t.subscribedEvents.map((function(e){return E.eventMappings[e]||""}))),E.ApiKey&&(i=E.addParam(i,"api_key",E.ApiKey)),void 0===t.widgetId&&(t.type&&(i=E.addParam(i,"type",t.type)),t.recipeId&&(i=E.addParam(i,"recipe_id",t.recipeId)),t.displayOptionsId&&(i=E.addParam(i,"display_options_id",t.displayOptionsId)),t.accountId&&(i=E.addParam(i,"account_id",t.accountId))),i=E.addParam(i,"parent_url",document.location.href),t.designEditorDevice&&"desktop"!==t.designEditorDevice&&(i=E.addParam(i,"design_editor_device",t.designEditorDevice)),a()&&!t.designEditorDevice?i=E.addParam(i,"mobile",!0):o()&&!t.designEditorDevice&&(i=E.addParam(i,"tablet",!0));var l=/iPad|iPhone|iPod/.test(navigator.platform),s=-1!==document.location.href.indexOf("standalone"),c=document.getElementById(t.containerId||E.defaults.containerId);c&&"none"==c.style.display&&(i=E.addParam(i,"displayed","none")),t.iframeId=E.defaults.iframeId+I(),t.iframe_src=i,t.containerId=t.containerId||E.defaults.containerId;var m=document.createElement("iframe");if(m.id=t.iframeId,m.style.height="0px",l&&!s&&"tap2shop"!==t.type&&"photowall"!==t.type&&"mosaic"!==t.type&&"mosaic_v2"!==t.type&&"single"!==t.type?m.width="1px":m.width="100%",m.style.visibility=E.priority?"hidden":"",m.frameBorder="0",m.style.border="none","undefined"!=typeof I18n&&void 0!==I18n.t?m.title=I18n.t("widget.titles.gallery"):m.title="Customer Photo gallery powered by Emplifi",m.setAttribute("allowFullScreen",""),m.setAttribute("data-widget-id",t.widgetId||"1"),m.onerror=function(e){E.iframeErrorHandler(e,m.id)},m.onload=function(){var i;t.onWidgetLoaded&&t.onWidgetLoaded();var a={};t.subscribedEvents&&t.subscribedEvents.indexOf("widgetLoaded")>=0&&(i={name:"pixlee:widget:loaded",type:"action",source:"parent",destination:"parent",data:a},window.parent.postMessage(JSON.stringify(i),"*"));var o=this,n=function(){var t=e(C)(o),a=!!x&&x[o.id];t&&a&&!a.wasSeen&&(i={name:"pixlee:widget:visible",type:"relay",source:"parent",destination:"widget",data:{src:o.src}},window.parent.postMessage(JSON.stringify(i),"*"),window.removeEventListener("scroll",n),x[o.id].wasSeen=!0)};window.addEventListener("scroll",n),n()},m.src=t.iframe_src,E.priority)document.getElementById("pixlee_init_container").style.visibility="hidden",document.getElementById("pixlee_init_container").style.height="0",document.getElementById("pixlee_init_container").appendChild(m);else{var u=document.getElementById(t.containerId);try{u.appendChild(m)}catch(e){console.warn("Pixlee: couldn't find any container with id "+t.containerId)}void 0===E.pixContainer&&(E.pixContainer=[]),E.pixContainer.push(u)}E.fixedWidth=t.fixedWidth,x[t.iframeId]={options:t,iframe:m}})),E.provide("forceAttribution",(function(e){E.pixContainer=E.pixContainer||[],E.pixContainer.forEach((function(t){var i=t.querySelector("[id*=pixlee_widget_iframe]");if(null!==i&&i.src===e.src&&!t.querySelector("[id*=powered_by_pixlee]")){var a=document.createElement("a");a.id="powered_by_pixlee"+I(),a.target="blank","undefined"!=typeof I18n&&void 0!==I18n.t?(I18n.locale=e.locale,I18n.fallbacks=!0,a.title=I18n.t("attribution.title"),a.innerHTML="<img id='pixlee-logo' alt='' src='https://assets.pixlee.com/images/logo.png' style='margin-right: 3px!important;width: 8px !important;height: 8px !important;'></img>"+I18n.t("attribution.text")):(a.title="Customer photo gallery powered by Emplifi",a.innerHTML="<img id='pixlee-logo' alt='' src='https://assets.pixlee.com/images/logo.png' style='margin-right: 3px !important;width: 8px !important;height: 8px !important;'></img>Powered by Emplifi"),!e.landingPageUrl||0!==e.landingPageUrl.indexOf("https://")&&0!==e.landingPageUrl.indexOf("http://")?a.href="https://emplifi.io/solutions/social-commerce":a.href=e.landingPageUrl+"&utm_medium=widget-main";for(var o={opacity:"1",visibility:"visible",height:"8px",width:"200px",display:"flex",color:"#667282","text-transform":"uppercase","align-items":"center","justify-content":"center","font-size":"10px","font-weight":"normal","font-family":"sofia_regular, sans-serif","text-decoration":"none",padding:"5px",margin:"0 auto","line-height":"0",position:"relative",top:"auto",right:"auto",bottom:"auto",left:"auto","-webkit-transform":"none","-moz-transform":"none","-ms-transform":"none","-o-transform":"none",transform:"none","-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none","-o-transition":"none",transition:"none","-webkit-animation":"none","-moz-animation":"none","-ms-animation":"none","-o-animation":"none",animation:"none","-webkit-filter":"none","-moz-filter":"none","-ms-filter":"none","-o-filter":"none","-webkit-backface-visibility":"visible","-moz-backface-visibility":"visible","-ms-backface-visibility":"visible","-o-backface-visibility":"visible","backface-visibility":"visible","-webkit-box-shadow":"none","-moz-box-shadow":"none","-ms-box-shadow":"none","-o-box-shadow":"none","box-shadow":"none",filter:"none","z-index":"100",border:"none"},n=Object.keys(o),r=0;r<n.length;r++)a.style.setProperty(n[r],o[n[r]],"important");e.disablePoweredByClick&&a.style.setProperty("pointer-events","none","important"),e.isSimple||a.setAttribute("rel","nofollow");var d=function(t){var i=t.target.parentNode&&t.target.parentNode.id&&t.target.parentNode.id.includes("powered_by_pixlee")?t.target.parentNode:t.target;if(i&&i.parentNode)try{i.removeEventListener("DOMNodeRemoved",d),i.parentNode.removeChild(i)}catch(e){console.warn(e)}E.forceAttribution(e)};if("MutationObserver"in window)new MutationObserver((function(e){e.forEach(d)})).observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0});t.appendChild(a),a.addEventListener("DOMNodeRemoved",d),E.mutationObserverPoweredBy=d}}))})),O.provide("renderFrame",(function(){try{w&&document.body.appendChild(w);var e=document.getElementById("pixlee_init_container");for(var t in x){var i=x[t],a=i.options.containerId,o=e.querySelector("#"+i.options.iframeId),n=document.getElementById(a);n.appendChild(o),void 0===E.pixContainer&&(E.pixContainer=[]),E.pixContainer.push(n),i.iframe.style.visibility=""}s()}catch(e){console.warn("Failed to render the widget, Probably because pixlee_init_container div is not on the page")}})),O.provide("resizeWidget",(function(e){s(e)})),O.provide("init",(function(e){E.ApiKey=e.apiKey,E.priority=e.priority,void 0!==e.rootUrl&&(E.defaults.rootUrl=e.rootUrl+"/widget",E.defaults.uploaderUrl=e.rootUrl+"/uploader",E.defaults.lightboxRootUrl=e.rootUrl+"/lightbox",E.defaults.socialAuthUrl=e.rootUrl+"/social_auth");const t=E.getCookie("experiment_"+E.ApiKey);"object"==typeof t&&null!==t&&(E.experimentState="group_known")})),O.provide("scrollToWidget",(function(e,t,i){if(!(i<=0)){var a=100,o=(t-e.scrollTop-a)/i*10;setTimeout((function(){e.scrollTop=e.scrollTop+o,e.scrollTop!==t&&O.scrollToWidget(e,t,i-10)}),10)}})),O.provide("changedCookiePolicy",u),O.provide("acceptCookiePolicy",g),O.provide("denyCookiePolicy",f),O.provide("closePhoto",(function(){h({name:"pixlee:close:lightbox",data:"none",destination:"lightbox",source:"parent",type:"action"})})),O.provide("setUploaderProfile",(function(e){h({name:"pixlee:set:uploader:profile",data:e||{},destination:"all",source:"parent",type:"action"})})),E.provide("mobileUploaderResize",(function(){E.pixleeMobileUploader.style.height=window.innerHeight+"px"})),O.provide("iFrameResize",(function(e){PixleeiFrameResize(e)})),window.Pixlee?(window.PixleeWidgetsManager=O,_="PixleeWidgetsManager"):(window.Pixlee=O,_="Pixlee"),E.priority||(window.PixleeAsyncInit&&!window.PixleeAsyncInit.hasRun&&(window.Pixlee.hasRun=!0,e(window.PixleeAsyncInit)(_)),E.ecomm_platform||s(E.fixedWidth));try{window.addEventListener("message",(function(t){e(y)(t)}),!1)}catch(e){console.warn('Pixlee: couldn"t find any container with id pixlee_container')}Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(null==this||"function"!=typeof e)throw new TypeError;for(var t=Object(this),i=t.length>>>0,a=arguments.length>=2?arguments[1]:void 0,o=0;o<i;o++)o in t&&e.call(a,t[o],o,t)}),"function"==typeof define&&define.amd&&define("pixlee",[],(function(){return O}))}();